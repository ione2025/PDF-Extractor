<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Extractor Pro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Adobe Acrobat Reader DC Style Header -->
    <div class="app-header">
        <!-- Menu Bar (Adobe Acrobat Style) -->
        <div class="menu-bar">
            <div class="menu-bar-left">
                <div class="app-logo">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M7 3H17C18.1046 3 19 3.89543 19 5V19C19 20.1046 18.1046 21 17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3Z" stroke="currentColor" stroke-width="2"/>
                        <path d="M9 7H15M9 11H15M9 15H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span class="app-title">PDF Extractor Pro</span>
                </div>
                <nav class="menu-items">
                    <button class="menu-item" id="menu-file">
                        <span>File</span>
                    </button>
                    <button class="menu-item" id="menu-edit">
                        <span>Edit</span>
                    </button>
                    <button class="menu-item" id="menu-view">
                        <span>View</span>
                    </button>
                    <button class="menu-item" id="menu-tools">
                        <span>Tools</span>
                    </button>
                    <button class="menu-item" id="menu-window">
                        <span>Window</span>
                    </button>
                    <button class="menu-item" id="menu-help">
                        <span>Help</span>
                    </button>
                </nav>
            </div>
            <div class="menu-bar-right">
                <button class="icon-btn" id="settings-btn" title="Settings">
                    <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 6C7.79086 6 6 7.79086 6 10C6 12.2091 7.79086 14 10 14C12.2091 14 14 12.2091 14 10C14 7.79086 12.2091 6 10 6ZM10 8C11.1046 8 12 8.89543 12 10C12 11.1046 11.1046 12 10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8Z"/>
                        <path d="M8.5 3H11.5L12 5.5L14 6.5L16 5L17.5 7.5L16 9.5V10.5L17.5 12.5L16 15L14 13.5L12 14.5L11.5 17H8.5L8 14.5L6 13.5L4 15L2.5 12.5L4 10.5V9.5L2.5 7.5L4 5L6 6.5L8 5.5L8.5 3Z"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <!-- Quick Tools Toolbar (Adobe Acrobat Style) -->
        <div class="quick-toolbar">
            <button class="tool-btn" id="open-file-btn" title="Open PDF">
                <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M4 3C3.44772 3 3 3.44772 3 4V16C3 16.5523 3.44772 17 4 17H16C16.5523 17 17 16.5523 17 16V7.41421C17 7.01639 16.842 6.63486 16.5607 6.35355L13.6464 3.43934C13.3651 3.15804 12.9836 3 12.5858 3H4ZM11 11H7V9H11V11Z"/>
                </svg>
                <span>Open</span>
            </button>
            <div class="toolbar-separator"></div>
            <button class="tool-btn" id="extract-text-btn" title="Extract Text">
                <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M4 4H16V6H4V4ZM4 8H16V10H4V8ZM4 12H12V14H4V12Z"/>
                </svg>
                <span>Extract Text</span>
            </button>
            <button class="tool-btn" id="extract-images-btn" title="Extract Images">
                <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M3 3H17C17.5523 3 18 3.44772 18 4V16C18 16.5523 17.5523 17 17 17H3C2.44772 17 2 16.5523 2 16V4C2 3.44772 2.44772 3 3 3ZM14 8L11 12L9 9.5L6 14H14V8Z"/>
                </svg>
                <span>Extract Images</span>
            </button>
            <div class="toolbar-separator"></div>
            <button class="tool-btn" id="export-btn" title="Export Results" disabled>
                <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 3L10 13M10 3L6 7M10 3L14 7M4 15H16V17H4V15Z"/>
                </svg>
                <span>Export</span>
            </button>
        </div>
    </div>

    <!-- Main Container with Sidebar Layout -->
    <div class="app-container">
        <!-- Left Sidebar (Tools Panel - Adobe Acrobat Reader DC Style) -->
        <aside class="left-sidebar" id="left-sidebar">
            <div class="sidebar-header">
                <h3>Tools</h3>
                <button class="toggle-sidebar-btn" id="toggle-sidebar-btn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M10 4L6 8L10 12"/>
                    </svg>
                </button>
            </div>
            
            <div class="tools-list">
                <!-- Adobe Acrobat Reader DC Menu Items -->
                <button class="tool-item" data-tool="create-pdf">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <rect x="3" y="3" width="14" height="14" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span>Create a PDF</span>
                </button>
                
                <button class="tool-item" data-tool="combine-files">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M5 3H9L10 4H15V8H5V3ZM5 10H15V17H5V10Z"/>
                    </svg>
                    <span>Combine Files</span>
                </button>
                
                <button class="tool-item" data-tool="edit-pdf">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M15 3L17 5L9 13L7 14L8 12L16 4M4 4H7V6H4V16H14V13H16V16C16 17.1 15.1 18 14 18H4C2.9 18 2 17.1 2 16V6C2 4.9 2.9 4 4 4Z"/>
                    </svg>
                    <span>Edit a PDF</span>
                </button>
                
                <button class="tool-item" data-tool="request-esignatures">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 15C3 15 5 13 7 13C9 13 9 15 11 15C13 15 13 13 15 13C17 13 19 15 19 15V17C19 17 17 15 15 15C13 15 13 17 11 17C9 17 9 15 7 15C5 15 3 17 3 17V15ZM17 6H15V4H13V6H11V4H9V6H7V4H5V6H3V8H5V10H3V12H17V10H15V8H17V6Z"/>
                    </svg>
                    <span>Request e-signatures</span>
                </button>
                
                <button class="tool-item" data-tool="fill-sign">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M15.5 2.5C14.8 2.5 14.1 2.8 13.6 3.3L3.5 13.4L2.5 17.5L6.6 16.5L16.7 6.4C17.7 5.4 17.7 3.8 16.7 2.8C16.2 2.3 15.5 2 14.9 2L15.5 2.5ZM4 6H12V8H4V6ZM4 10H10V12H4V10Z"/>
                    </svg>
                    <span>Fill & Sign</span>
                </button>
                
                <button class="tool-item" data-tool="export-pdf">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 3L10 13M10 13L6 9M10 13L14 9M4 15H16V17H4V15Z"/>
                    </svg>
                    <span>Export PDF</span>
                </button>
                
                <button class="tool-item" data-tool="organize-pages">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 3H8V8H3V3ZM10 3H15V8H10V3ZM3 10H8V15H3V10ZM10 10H15V15H10V10ZM3 17H8V19H3V17Z"/>
                    </svg>
                    <span>Organize pages</span>
                </button>
                
                <button class="tool-item" data-tool="send-comments">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M18 2H2C1.4 2 1 2.4 1 3V14C1 14.6 1.4 15 2 15H5V18L9 15H18C18.6 15 19 14.6 19 14V3C19 2.4 18.6 2 18 2ZM16 10L12 13V10H6V7H12V4L16 7V10Z"/>
                    </svg>
                    <span>Send for comments</span>
                </button>
                
                <button class="tool-item" data-tool="add-comments">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M18 2H2C1.4 2 1 2.4 1 3V14C1 14.6 1.4 15 2 15H5V18L9 15H18C18.6 15 19 14.6 19 14V3C19 2.4 18.6 2 18 2ZM10 11H6V9H10V11ZM14 8H6V6H14V8Z"/>
                    </svg>
                    <span>Add comments</span>
                </button>
                
                <button class="tool-item" data-tool="scan-ocr">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M4 4H16V6H4V4ZM4 8H16V10H4V8ZM4 12H12V14H4V12ZM16 12H18V14H16V12ZM16 15H18V17H16V15Z"/>
                    </svg>
                    <span>Scan & OCR</span>
                </button>
                
                <button class="tool-item" data-tool="protect-pdf">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 2L3 5V9C3 13.5 6 17.7 10 18.9C14 17.7 17 13.5 17 9V5L10 2ZM15 9C15 12.5 12.7 15.7 10 16.8C7.3 15.7 5 12.5 5 9V6.3L10 4.2L15 6.3V9ZM8 9L7 10L9.5 12.5L13.5 8.5L12.5 7.5L9.5 10.5L8 9Z"/>
                    </svg>
                    <span>Protect a PDF</span>
                </button>
                
                <button class="tool-item" data-tool="redact-pdf">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 3H17V17H3V3ZM5 7H15V9H5V7ZM5 11H12V13H5V11Z" fill="currentColor"/>
                        <rect x="12" y="11" width="3" height="2" fill="var(--error-color)"/>
                    </svg>
                    <span>Redact a PDF</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Welcome Screen (shown when no file is loaded) -->
            <div class="welcome-screen" id="welcome-screen">
                <div class="welcome-content">
                    <div class="welcome-icon">
                        <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
                            <rect x="20" y="15" width="80" height="90" rx="8" stroke="currentColor" stroke-width="3" opacity="0.3"/>
                            <path d="M35 35H85M35 50H85M35 65H70" stroke="currentColor" stroke-width="3" stroke-linecap="round" opacity="0.5"/>
                        </svg>
                    </div>
                    <h2>Select a tool to get started</h2>
                    <p>Open a PDF file or choose a tool from the left panel</p>
                    
                    <div class="quick-actions">
                        <button class="quick-action-btn" id="quick-open-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M5 4H19C20.1046 4 21 4.89543 21 6V18C21 19.1046 20.1046 20 19 20H5C3.89543 20 3 19.1046 3 18V6C3 4.89543 3.89543 4 5 4ZM13 10H9V12H13V10Z"/>
                            </svg>
                            <span>Open PDF File</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Work Area (shown when processing) -->
            <div class="work-area" id="work-area" style="display: none;">
                <form id="upload-form" enctype="multipart/form-data" style="display: none;">
                    <input type="file" id="pdf-file" name="file" accept=".pdf" required>
                </form>

                <!-- Progress Section -->
                <div id="progress-container" class="progress-container" style="display: none;">
                    <div class="progress-info">
                        <div class="progress-icon">
                            <div class="spinner-adobe"></div>
                        </div>
                        <div class="progress-text">
                            <h3 id="progress-message">Processing...</h3>
                            <p id="progress-details"></p>
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="progress-percentage">0%</span>
                        <span id="progress-eta"></span>
                    </div>
                </div>

                <div id="loading" class="loading-adobe" style="display: none;">
                    <div class="spinner-adobe"></div>
                    <p id="loading-text">Processing PDF...</p>
                </div>

                <div id="error-message" class="error-message-adobe" style="display: none;"></div>

                <!-- Text Results Section -->
                <div id="text-results-section" class="results-panel" style="display: none;">
                    <div class="results-header-bar">
                        <div class="results-title">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M4 4H16V6H4V4ZM4 8H16V10H4V8ZM4 12H12V14H4V12Z"/>
                            </svg>
                            <span>Extracted Text</span>
                        </div>
                        <div class="results-actions">
                            <button id="copy-btn" class="action-btn-adobe">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M4 2H12C13.1046 2 14 2.89543 14 4V12C14 13.1046 13.1046 14 12 14H4C2.89543 14 2 13.1046 2 12V4C2 2.89543 2.89543 2 4 2Z"/>
                                </svg>
                                Copy
                            </button>
                        </div>
                    </div>
                    <div class="results-info-bar">
                        <span id="filename-display"></span>
                        <span class="info-separator">•</span>
                        <span id="method-display"></span>
                        <span class="info-separator">•</span>
                        <span id="ocr-display"></span>
                    </div>
                    <div class="text-viewer">
                        <pre id="extracted-text"></pre>
                    </div>
                </div>

                <!-- Image Results Section -->
                <div id="image-results-section" class="results-panel" style="display: none;">
                    <div class="results-header-bar">
                        <div class="results-title">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M3 3H17C17.5523 3 18 3.44772 18 4V16C18 16.5523 17.5523 17 17 17H3C2.44772 17 2 16.5523 2 16V4C2 3.44772 2.44772 3 3 3Z"/>
                            </svg>
                            <span>Extraction Complete</span>
                        </div>
                        <div class="results-actions">
                            <button id="download-excel-btn" class="action-btn-adobe primary" style="display: none;">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M8 2V10M8 10L5 7M8 10L11 7M3 12H13V14H3V12Z"/>
                                </svg>
                                Download Excel
                            </button>
                        </div>
                    </div>
                    <div class="results-info-bar">
                        <span id="image-filename-display"></span>
                    </div>
                    <div class="results-stats">
                        <div class="stat-box">
                            <div class="stat-number" id="total-images">0</div>
                            <div class="stat-label">Total Images</div>
                        </div>
                        <div class="stat-box success">
                            <div class="stat-number" id="processed-images">0</div>
                            <div class="stat-label">With SKU</div>
                        </div>
                        <div class="stat-box warning">
                            <div class="stat-number" id="skipped-images">0</div>
                            <div class="stat-label">Skipped</div>
                        </div>
                    </div>
                    <div class="products-container">
                        <div class="section-title">Extracted Products</div>
                        <div id="products-list" class="products-grid"></div>
                    </div>
                    <div class="output-location">
                        <div class="section-title">Output Location</div>
                        <div class="output-description">
                            <p>Files organized in category folders with WebP images, JSON metadata, and Excel report.</p>
                            <div class="output-path">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M2 3H7L8 4H14V13H2V3Z"/>
                                </svg>
                                <code>output/</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Right Sidebar (Properties Panel) -->
        <aside class="right-sidebar" id="right-sidebar">
            <div class="sidebar-header">
                <h3>Properties</h3>
            </div>
            
            <div class="properties-content">
                <!-- Text Extraction Options -->
                <div id="text-options" class="property-section">
                    <div class="property-group">
                        <label class="property-label">Extraction Method</label>
                        <div class="radio-group-adobe">
                            <label class="radio-option">
                                <input type="radio" name="method" value="pdfplumber" checked>
                                <span class="radio-custom"></span>
                                <span class="radio-text">PDFPlumber</span>
                                <span class="badge-recommended">Recommended</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="method" value="pypdf2">
                                <span class="radio-custom"></span>
                                <span class="radio-text">PyPDF2</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="property-group">
                        <label class="property-label">OCR Options</label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="use_ocr" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">Enable Multi-language OCR</span>
                        </label>
                        <div class="help-text-adobe">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                                <path d="M7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C10.866 14 14 10.866 14 7C14 3.13401 10.866 0 7 0ZM6 4H8V6H6V4ZM6 8H8V10H6V8Z"/>
                            </svg>
                            <div>
                                <strong>Simultaneous Multi-language Recognition:</strong>
                                <ul style="margin: 4px 0 0 0; padding-left: 20px; list-style: disc;">
                                    <li>English</li>
                                    <li>العربية (Arabic)</li>
                                    <li>繁體中文 (Chinese Traditional)</li>
                                    <li>简体中文 (Chinese Simplified)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Image Extraction Options -->
                <div id="image-options" class="property-section" style="display: none;">
                    <div class="property-group">
                        <div class="info-panel-adobe">
                            <div class="info-header">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 2L12.5 7L18 8L14 12L15 18L10 15L5 18L6 12L2 8L7.5 7L10 2Z"/>
                                </svg>
                                <span>AI-Powered Analysis</span>
                            </div>
                            <ul class="feature-list-adobe">
                                <li>Ultra-HD extraction (300-400 DPI)</li>
                                <li>Gemini AI for SKU detection</li>
                                <li>Auto product categorization</li>
                                <li>Color extraction & SVG paths</li>
                                <li>Excel report generation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Status Bar (Bottom) -->
    <div class="status-bar">
        <div class="status-left">
            <span id="status-text">Ready</span>
        </div>
        <div class="status-right">
            <span class="status-item">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                    <circle cx="6" cy="6" r="5"/>
                </svg>
                English • العربية • 中文
            </span>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
